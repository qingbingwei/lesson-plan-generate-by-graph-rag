# 应用配置
app:
  name: "lesson-plan-backend"
  env: "development"  # development, staging, production
  port: 8080
  debug: true

# 数据库配置
database:
  postgres:
    host: "${DB_HOST:localhost}"
    port: "${DB_PORT:5432}"
    name: "${DB_NAME:lesson_plan}"
    user: "${DB_USER:admin}"
    password: "${DB_PASSWORD:password123}"
    sslmode: "${DB_SSL_MODE:disable}"
    max_open_conns: 100
    max_idle_conns: 10
    conn_max_lifetime: 3600  # 秒

  neo4j:
    uri: "${NEO4J_URI:bolt://localhost:7687}"
    user: "${NEO4J_USER:neo4j}"
    password: "${NEO4J_PASSWORD:password123}"
    max_connections: 50

  redis:
    host: "${REDIS_HOST:localhost}"
    port: "${REDIS_PORT:6379}"
    password: "${REDIS_PASSWORD:redis123}"
    db: 0
    pool_size: 10

# JWT配置
jwt:
  secret: "${JWT_SECRET:your-secret-key-change-in-production}"
  expiry: "24h"
  refresh_expiry: "168h"  # 7 days
  issuer: "lesson-plan"

# 智能体服务配置
agent:
  url: "${AGENT_SERVICE_URL:http://localhost:13001}"
  timeout: 120  # 秒

# 日志配置
log:
  level: "${LOG_LEVEL:info}"  # debug, info, warn, error
  format: "json"  # json, console
  output: "stdout"  # stdout, file
  file_path: "./logs/app.log"
  max_size: 100  # MB
  max_backups: 3
  max_age: 7  # days

# CORS配置
cors:
  allowed_origins:
    - "http://localhost"
    - "http://localhost:3000"
    - "http://localhost:5173"
  allowed_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allowed_headers:
    - "Origin"
    - "Content-Type"
    - "Accept"
    - "Authorization"
    - "X-Trace-ID"
    - "X-Request-ID"
    - "X-Generation-Api-Key"
    - "X-Embedding-Api-Key"
  exposed_headers:
    - "Content-Length"
    - "X-Trace-ID"
    - "X-Request-ID"
  allow_credentials: true
  max_age: 86400

# 限流配置
rate_limit:
  enabled: true
  requests_per_second: 100
  burst: 200

# 文件上传配置
upload:
  max_size: 10485760  # 10MB
  allowed_types:
    - "image/jpeg"
    - "image/png"
    - "image/gif"
    - "application/pdf"
  storage_path: "./uploads"
